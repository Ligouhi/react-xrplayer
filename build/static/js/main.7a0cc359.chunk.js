(this["webpackJsonpreact-xrplayer"]=this["webpackJsonpreact-xrplayer"]||[]).push([[0],{31:function(e,t,n){e.exports=n(65)},36:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),i=n(9),a=n.n(i),c=(n(36),n(1)),l=n(10),u=n(26),s=n.n(u);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h={live_configure:""};function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"onDeviceOrientationChangeEvent",(function(e){n.deviceOrientation=e})),y(this,"onScreenOrientationChangeEvent",(function(){n.screenOrientation=window.orientation||0})),y(this,"connect",(function(e){window.addEventListener("orientationchange",n.onScreenOrientationChangeEvent,!1),window.addEventListener("deviceorientation",n.onDeviceOrientationChangeEvent,!1),n.onScreenOrientationChangeEvent(),n.enabled=!0})),y(this,"disConnect",(function(){n.enabled=!1,window.removeEventListener("orientationchange",n.onScreenOrientationChangeEvent,!1),window.removeEventListener("deviceorientation",n.onDeviceOrientationChangeEvent,!1)})),y(this,"update",(function(e){if(!1!==n.enabled){var t=n.deviceOrientation.alpha?c.Math.degToRad(n.deviceOrientation.alpha):0;t-=n.alphaOffset;var o=n.deviceOrientation.beta?c.Math.degToRad(n.deviceOrientation.beta):0,r=n.deviceOrientation.gamma?c.Math.degToRad(n.deviceOrientation.gamma):0,i=n.screenOrientation?c.Math.degToRad(n.screenOrientation):0,a=new c.Vector3(0,0,1),l=new c.Quaternion,u=new c.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5)),s=new c.Euler;s.set(o,t,-r,"YXZ"),n.camera.quaternion.setFromEuler(s),n.camera.quaternion.multiply(u),n.camera.quaternion.multiply(l.setFromAxisAngle(a,-i));var f=new c.Vector3(0,0,0);n.camera.getWorldDirection(f),f.multiplyScalar(-e),n.camera.position.copy(f),n.camera.quaternion.copy(n.camera.quaternion)}})),y(this,"getDataFromDevice",(function(){})),this.camera=t,this.enabled=!1,this.deviceOrientation={alpha:0,beta:90,gamma:0},this.screenOrientation=0,this.alphaOffset=0},b=n(27);function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"connect",(function(){n.isConnected=!0,n.initSphericalData()})),v(this,"disConnect",(function(){n.isConnected=!1})),v(this,"initSphericalData",(function(){var e=new c.Spherical,t=n.camera.position;e.setFromCartesianCoords(t.x,t.y,t.z),n.phi=e.phi,n.theta=e.theta,n.distance=e.radius,n.lon=90-c.Math.radToDeg(n.theta),n.lat=90-c.Math.radToDeg(n.phi)})),v(this,"initControlsListener",(function(){n.browser=window.navigator.userAgent.toLowerCase(),n.browser.indexOf("mobile")>0?(document.addEventListener("touchstart",n.onTouchstart,!1),document.addEventListener("touchmove",n.onTouchmove,!1),document.addEventListener("touchend",n.onTouchend,!1),document.addEventListener("wheel",n.onDocumentMouseWheel,!1)):(document.addEventListener("mousedown",n.onDocumentMouseDown,!1),document.addEventListener("mousemove",n.onDocumentMouseMove,!1),document.addEventListener("mouseup",n.onDocumentMouseUp,!1),document.addEventListener("wheel",n.onDocumentMouseWheel,!1),document.addEventListener("keydown",n.onDocumentKeyDown,!1),document.addEventListener("keyup",n.onDocumentKeyUp,!1))})),v(this,"update",(function(){n.updateGUI(),n.camera.lookAt(n.camera.target),n.isConnected&&n.updateCameraPosition()})),v(this,"updateGUI",(function(){!1===n.orientationEnable&&n.control.orientationControl>=1&&n.connectOrientationControls(),!0===n.orientationEnable&&n.control.orientationControl<1&&n.disconnectOrientationControls()})),v(this,"updateCameraPosition",(function(){if(!0!==n.orientationEnable){var e=2,t=2;n.onKeyShift&&(e=10,t=10),n.onKeyLeft&&(n.lon-=e),n.onKeyRight&&(n.lon+=e),n.onKeyUp&&(n.lat-=t),n.onKeyDown&&(n.lat+=t),n.lat=Math.max(-85,Math.min(85,n.lat)),n.phi=c.Math.degToRad(90-n.lat),n.theta=c.Math.degToRad(n.lon),n.camera.position.x=n.distance*Math.sin(n.phi)*Math.cos(n.theta),n.camera.position.y=n.distance*Math.cos(n.phi),n.camera.position.z=n.distance*Math.sin(n.phi)*Math.sin(n.theta)}else n.orientationControls.update(n.distance)})),v(this,"onDocumentMouseDown",(function(e){document.pointerLockElement||(e.preventDefault(),console.log("\u9f20\u6807\u70b9\u51fbDown"),n.isUserInteracting=!0,n.onPointerDownPointerX=e.clientX,n.onPointerDownPointerY=e.clientY,n.onPointerDownLon=n.lon,n.onPointerDownLat=n.lat)})),v(this,"onDocumentMouseMove",(function(e){!0===n.isUserInteracting&&(n.lon=.1*(n.onPointerDownPointerX-e.clientX)+n.onPointerDownLon,n.lat=.1*(n.onPointerDownPointerY-e.clientY)+n.onPointerDownLat),document.pointerLockElement&&(n.lon=.1*e.movementX+n.lon,n.lat=.1*e.movementY+n.lat)})),v(this,"onDocumentMouseUp",(function(e){n.isUserInteracting=!1})),v(this,"onTouchstart",(function(e){if(1===e.targetTouches.length){console.log("touch","start"),n.isUserInteracting=!0;var t=e.targetTouches[0];n.onPointerDownPointerX=t.pageX,n.onPointerDownPointerY=t.pageY,n.onPointerDownLon=n.lon,n.onPointerDownLat=n.lat}})),v(this,"onTouchmove",(function(e){if(!0===n.isUserInteracting){var t=e.targetTouches[0];console.log("touching",t.pageX),n.lon=.1*(parseFloat(n.onPointerDownPointerX)-t.pageX)+n.onPointerDownLon,n.lat=.1*parseFloat(n.onPointerDownPointerY-t.pageY)+n.onPointerDownLat}})),v(this,"onTouchend",(function(e){n.isUserInteracting=!1})),v(this,"onDocumentMouseWheel",(function(e){n.distance+=.5*e.deltaY,n.distance<=0?n.distance=0:n.distance>0&&n.distance<1e3?n.innerView||(console.log("\u8fdb\u6765",n.camera.position.y),n.innerView=!0):n.distance>=1e3&&n.distance<=1500?n.innerView&&(console.log("\u51fa\u6765"),n.innerView=!1):n.distance,console.log("distance",n.distance)})),v(this,"onDocumentKeyDown",(function(e){switch(e.preventDefault(),e.keyCode||e.which||e.charCode){case 65:case 37:n.onKeyLeft=!0,n.onKeyRight=!1;break;case 68:case 39:n.onKeyRight=!0,n.onKeyLeft=!1;break;case 87:case 38:n.onKeyUp=!0,n.onKeyDown=!1;break;case 83:case 40:n.onKeyDown=!0,n.onKeyUp=!1;break;case 16:n.onKeyShift=!0;break;case 81:document.pointerLockElement?document.exitPointerLock():(document.body.requestPointerLock(),n.isUserInteracting=!1);break;case 82:console.log("alphaOffset = "+c.MathUtils.radToDeg(n.orientationControls.alphaOffset)),console.log("lon = "+n.lon),console.log("dO.alpha = "+n.orientationControls.deviceOrientation.alpha)}})),v(this,"onDocumentKeyUp",(function(e){switch(e.keyCode||e.which||e.charCode){case 65:case 37:n.onKeyLeft=!1;break;case 68:case 39:n.onKeyRight=!1;break;case 87:case 38:n.onKeyUp=!1;break;case 83:case 40:n.onKeyDown=!1;break;case 16:n.onKeyShift=!1}})),v(this,"connectOrientationControls",(function(){n.orientationControls.connect(c.MathUtils.degToRad(n.lon-90)),n.orientationEnable=!0})),v(this,"disconnectOrientationControls",(function(){n.orientationControls.disConnect(),n.orientationEnable=!1,n.initSphericalData()})),this.camera=t,this.isConnected=!1,this.isUserInteracting=!1,this.onMouseDownMouseX=0,this.onMouseDownMouseY=0,this.lon=0,this.onMouseDownLon=0,this.lat=0,this.onMouseDownLat=0,this.phi=0,this.theta=0,this.distance=10,this.onPointerDownPointerX=0,this.onPointerDownPointerY=0,this.onPointerDownLon=0,this.onPointerDownLat=0,this.onKeyLeft=!1,this.onKeyRight=!1,this.onKeyUp=!1,this.onKeyDown=!1,this.onKeyShift=!1,this.initControlsListener(),this.orientationControls=new m(this.camera),this.orientationEnable=!1;var o=new b.a;this.control=new function(){this.orientationControl=0},o.add(this.control,"orientationControl",0,1).step(1)},g=n(4);function C(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function j(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(){function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,"setPointList",(function(e){o.pointList=e,o.initPoints()})),E(this,"initPoints",(function(){o.pointGroup=new c.Group,o.pointArr=[],o.pointList.forEach((function(e){o.createPoint(e)})),o.scene.add(o.pointGroup),o.bindEvent()})),E(this,"contertSph2Rect",(function(e,t){return[500*Math.sin(c.Math.degToRad(e))*Math.cos(c.Math.degToRad(t)),500*Math.sin(c.Math.degToRad(e))*Math.sin(c.Math.degToRad(t)),500*Math.cos(c.Math.degToRad(e))]})),E(this,"createSpriteShape",(function(e,t,n){var o=(new c.TextureLoader).load(e);o.needsUpdate=!0;var r=new c.SpriteMaterial({map:o,transparent:!0,opacity:t,depthTest:!1}),i=new c.Sprite(r);return i.scale.set(2*n,2*n,1),i})),E(this,"getBackgroundTexture",(function(e,t,n){var o=document.createElement("canvas");document.getElementById("display").appendChild(o),o.width=128,o.height=128;var r=o.getContext("2d");r.fillStyle=e,r.arc(64,64,64,0,2*Math.PI),r.fill();var i=new c.Texture(o);i.needsUpdate=!0;var a=new c.SpriteMaterial({map:i,transparent:!0,opacity:t,depthTest:!1}),l=new c.Sprite(a);return l.scale.set(2*n,2*n,1),l})),E(this,"animatePoints",(function(e){var t=300;e.children.forEach((function(e){var n=e.scale,o=new g.a.Tween(n).to({x:.8*n.x,y:.8*n.y},500).delay(100),r=new g.a.Tween(n).to({x:1.2*n.x,y:1.2*n.y},500).delay(100);o.chain(r),r.chain(o),o.start(t+=100)}))})),E(this,"update",(function(){g.a.update()})),E(this,"bindEvent",(function(){var e=new c.Raycaster;document.addEventListener("click",(function(t){t.preventDefault();var n=new c.Vector2;n.x=t.clientX/window.innerWidth*2-1,n.y=-t.clientY/window.innerHeight*2+1,e.setFromCamera(n,o.camera);var r=e.intersectObjects(o.pointArr);r.length>0&&o.objectClickHandler&&o.objectClickHandler(r)}),!0)})),this.scene=t,this.camera=n,this.pointList=[],this.pointGroup=null,this.objectClickHandler=null}var t,n,o;return t=e,(n=[{key:"createPoint",value:function(e){var t,n=this.contertSph2Rect(e[1].phi,e[1].theta),o=new c.Group;o.name=e[0],(t=o.position).set.apply(t,C(n));var r=this.createSpriteShape("hotspot_video.png",1,16);o.add(r),r=this.getBackgroundTexture("#2d2d2d",.2,20),o.add(r),this.pointArr.push(r),r.name=e[0],this.pointGroup.add(o),this.animatePoints(o)}}])&&j(t.prototype,n),o&&j(t,o),e}(),P=n(2),_=n.n(P),k=n(28);n(59);function D(e){return(D="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function M(e,t){return!t||"object"!==D(t)&&"function"!==typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(c,e);var t,n,o,i,a=(t=c,function(){var e,n=H(t);if(T()){var o=H(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return M(this,e)});function c(){var e;x(this,c);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return A(L(e=a.call.apply(a,[this].concat(n))),"onCloseClickListener",(function(t){t.preventDefault(),e.props.onCloseClickHandler&&e.props.onCloseClickHandler()})),e}return n=c,(o=[{key:"render",value:function(){return r.a.createElement("div",{className:"overlay"},r.a.createElement(k.a,{url:this.props.iframeUrl,className:"iframe",loading:"true",allow:"fullscreen",display:"initial"}),r.a.createElement("div",{className:"close",onClick:this.onCloseClickListener}))}}])&&R(n.prototype,o),i&&R(n,i),c}(o.Component);V.propTypes={onCloseClickHandler:_.a.func.isRequired,iframeUrl:_.a.string.isRequired};var F=V;n(60);function N(e){return(N="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function z(e,t){return!t||"object"!==N(t)&&"function"!==typeof t?q(e):t}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(c,e);var t,n,o,i,a=(t=c,function(){var e,n=Y(t);if(W()){var o=Y(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return z(this,e)});function c(){var e;K(this,c);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return X(q(e=a.call.apply(a,[this].concat(n))),"onCloseClickListener",(function(t){t.preventDefault(),e.props.onCloseClickHandler&&e.props.onCloseClickHandler()})),X(q(e),"onImageClickListenr",(function(t){t.preventDefault(),e.props.jumpUrl&&window.open(e.props.jumpUrl,"_blank")})),e}return n=c,(o=[{key:"render",value:function(){return console.log("imageurl",this.props.imageUrl),r.a.createElement("div",{className:"overlay"},r.a.createElement("div",{className:"container"},r.a.createElement("img",{className:"image",onClick:this.onImageClickListenr,src:this.props.imageUrl,alt:""})),r.a.createElement("div",{className:"close",onClick:this.onCloseClickListener}))}}])&&I(n.prototype,o),i&&I(n,i),c}(o.Component);B.propTypes={onCloseClickHandler:_.a.func.isRequired,imageUrl:_.a.string.isRequired,jumpUrl:_.a.string};var Q=B,J=(n(61),n(7)),Z=n.n(J);function $(e){return($="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function te(e,t){return!t||"object"!==$(t)&&"function"!==typeof t?ne(e):t}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ce=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(c,e);var t,n,o,i,a=(t=c,function(){var e,n=re(t);if(oe()){var o=re(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return te(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),ae(ne(t=a.call(this,e)),"loadMp4Video",(function(){t.video.src=t.props.videoUrl,t.video.play()})),ae(ne(t),"loadHlsVideo",(function(){Z.a.isSupported()?(console.log("hls","support"),t.hls.loadSource(t.props.videoUrl),t.hls.attachMedia(t.video),t.hls.on(Z.a.Events.MANIFEST_PARSED,(function(){t.video.play(),console.log("videoplay")}))):(console.log("\u8bbe\u5907\u4e0d\u652f\u6301"),alert("\u8bbe\u5907\u4e0d\u652f\u6301"))})),ae(ne(t),"onCloseClickListener",(function(e){e.preventDefault(),t.props.onCloseClickHandler&&t.props.onCloseClickHandler()})),t.hls=null,t.video=null,t}return n=c,(o=[{key:"componentDidMount",value:function(){this.hls=new Z.a,this.video=this.videoNode,this.video.loop=!0,this.video.muted=!0,console.log("videoUrl",this.props.videoUrl),this.video.setAttribute("webkit-playsinline","webkit-playsinline");var e=this.props.videoUrl;e.endsWith(".mp4")?this.loadMp4Video():e.endsWith(".m3u8")&&this.loadHlsVideo()}},{key:"componentWillUnmount",value:function(){this.hls.destroy()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"overlay"},r.a.createElement("div",{className:"container "},r.a.createElement("video",{className:"video",controls:!0,ref:function(t){e.videoNode=t}})),r.a.createElement("div",{className:"close",onClick:this.onCloseClickListener}))}}])&&ee(n.prototype,o),i&&ee(n,i),c}(o.Component);ce.propTypes={onCloseClickHandler:_.a.func.isRequired,videoUrl:_.a.string.isRequired};var le=ce;n(62);function ue(e){return(ue="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pe(e,t){return!t||"object"!==ue(t)&&"function"!==typeof t?de(e):t}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ve=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(c,e);var t,n,o,i,a=(t=c,function(){var e,n=ye(t);if(he()){var o=ye(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return pe(this,e)});function c(){var e;se(this,c);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return be(de(e=a.call.apply(a,[this].concat(n))),"onCloseClickListener",(function(t){t.preventDefault(),e.props.onCloseClickHandler&&e.props.onCloseClickHandler()})),e}return n=c,(o=[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"overlay"},r.a.createElement("div",{className:"control-container "},r.a.createElement("button",null,"\u63a7\u5236\u9762\u677f")),r.a.createElement("div",{className:"close",onClick:this.onCloseClickListener}))}}])&&fe(n.prototype,o),i&&fe(n,i),c}(o.Component);ve.propTypes={onCloseClickHandler:_.a.func.isRequired};var we=ve;function ge(e){return(ge="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function je(e,t){return!t||"object"!==ge(t)&&"function"!==typeof t?Ee(e):t}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Se(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var De=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(c,e);var t,n,o,i,a=(t=c,function(){var e,n=Pe(t);if(Se()){var o=Pe(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return je(this,e)});function c(){var e;Ce(this,c);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return ke(Ee(e=a.call.apply(a,[this].concat(n))),"state",{infocard_visible:!1}),ke(Ee(e),"getEffect",(function(t){return t?"infocard"===t.type?r.a.createElement(F,{onCloseClickHandler:function(){e.props.onCloseClickHandler&&e.props.onCloseClickHandler()},iframeUrl:t.iframeUrl}):"image"===t.type?r.a.createElement(Q,{onCloseClickHandler:function(){e.props.onCloseClickHandler&&e.props.onCloseClickHandler()},imageUrl:t.imageUrl,jumpUrl:t.jumpUrl}):"video"===t.type?r.a.createElement(le,{onCloseClickHandler:function(){e.props.onCloseClickHandler&&e.props.onCloseClickHandler()},videoUrl:t.videoUrl}):"control"===t.type?r.a.createElement(we,{onCloseClickHandler:function(){e.props.onCloseClickHandler&&e.props.onCloseClickHandler()}}):"":""})),e}return n=c,(o=[{key:"render",value:function(){var e=this.getEffect(this.props.data);return r.a.createElement("div",null,e)}}])&&Oe(n.prototype,o),i&&Oe(n,i),c}(o.Component);De.propTypes={data:_.a.object,onCloseClickHandler:_.a.func.isRequired};var xe=De,Re=n(29),Me=n.n(Re);function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Te=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Le(this,"loadObj",(function(e){(new Me.a).load(e.objUrl,(function(e){n.obj=e,n.display(),console.log("load fbxobj success:",n.obj),n.obj.translateY(-80),n.startAnimation()}),(function(e){console.log("load fbx obj",e.loaded)}),(function(e){console.log("load fbxobj error:",e)}))})),Le(this,"display",(function(){n.scene.add(n.obj);var e=new c.AmbientLight(16777215);n.scene.add(e)})),Le(this,"remove",(function(){n.scene.remove(n.obj),n.mixer=null,n.animationAction=null})),Le(this,"startAnimation",(function(){n.mixer=new c.AnimationMixer(n.obj),n.animationAction=n.mixer.clipAction(n.obj.animations[0]),n.animationAction.play()})),Le(this,"stopAnimation",(function(){n.animationAction&&n.animationAction.stop()})),Le(this,"update",(function(){if(n.mixer){var e=n.clock.getDelta();n.mixer.update(e)}})),this.scene=t,this.mixer=null,this.obj=null,this.animationAction=null,this.clock=new c.Clock};function He(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ue=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),He(this,"loadObj",(function(e){n.data=e,(new c.ObjectLoader).load(e.objUrl,(function(t){n.obj=t;var o=(new c.TextureLoader).load(e.texture);t.material=new c.MeshBasicMaterial({map:o}),n.scene.add(t),t.scale.set(e.scale,e.scale,e.scale),t.geometry.center()}),(function(e){console.log("loading json obj",e.loaded)}),(function(e){console.log("err",e)}))})),He(this,"display",(function(){n.scene.add(n.obj)})),He(this,"remove",(function(){n.scene.remove(n.obj),n.mixer=null,n.animationAction=null})),He(this,"update",(function(){})),this.scene=t,this.obj=null,this.data=null};function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ve=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ae(this,"loadModelList",(function(e){e&&e.forEach((function(e){var t=n.getLoader(e[1]);n.modelMap.set(e[0],t),t.loadObj(e[1])}))})),Ae(this,"loadObj",(function(e){n.data=e,n.loader=n.getLoader(e),n.loader.loadObj(e)})),Ae(this,"display",(function(){n.loader&&n.loader.display()})),Ae(this,"remove",(function(){n.loader&&n.loader.remove()})),Ae(this,"startAnimation",(function(){n.loader&&"fbx"===n.data.modeFormat&&n.loader.startAnimation()})),Ae(this,"stopAnimation",(function(){n.loader&&"fbx"===n.data.modeFormat&&n.loader.stopAnimation()})),Ae(this,"getLoader",(function(e){switch(e.modeFormat){case"fbx":return new Te(n.scene);case"obj":return new Ue(n.scene);default:return null}})),Ae(this,"update",(function(){n.modelMap.forEach((function(e){e.update()}))})),this.scene=t,this.modelMap=new Map};function Fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ke=function e(t,n){var o=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;Fe(this,e),Ne(this,"init",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r={x:o.camera.position.x,y:o.camera.position.y,z:o.camera.position.z,fov:o.camera.fov};o.tween=new g.a.Tween(r).to({x:e.x,y:e.y,z:e.z,fov:e.fov},t).delay(n).easing(g.a.Easing.Quadratic.Out).onUpdate((function(){o.camera.position.x=r.x,o.camera.position.y=r.y,o.camera.position.z=r.z,o.camera.fov=r.fov,o.camera.updateProjectionMatrix()})).onStart((function(){o.onStartHandler&&o.onStartHandler()})).onComplete((function(){o.onCompleteHandler&&o.onCompleteHandler()}))})),Ne(this,"start",(function(){o.tween&&o.tween.start()})),Ne(this,"update",(function(){g.a.update()})),this.camera=t,this.tween=null,this.onCompleteHandler=null,this.onStartHandler=null,this.init(n,r,i)};function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ze=function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ie(this,"toNormalView",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o.state&&"normal"===o.state||(o.cameraMoveAction=new Ke(o.camera,{x:0,y:0,z:100,fov:80},e,t),o.cameraMoveAction.onStartHandler=function(){o.controls&&o.controls.disConnect()},o.cameraMoveAction.onCompleteHandler=function(){o.controls&&o.controls.connect(),o.state="planet"},o.cameraMoveAction.start())})),Ie(this,"toPlanetView",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o.state&&"planet"===o.state||(o.cameraMoveAction=new Ke(o.camera,{x:0,y:450,z:0,fov:150},e,t),o.cameraMoveAction.onStartHandler=function(){o.controls&&o.controls.disConnect()},o.cameraMoveAction.onCompleteHandler=function(){o.controls&&o.controls.connect(),o.state="planet"},o.cameraMoveAction.start())})),this.camera=t,this.state=null,this.controls=n,this.cameraMoveAction=null,this.onCompleteHandler=null,this.onStartHandler=null},qe=n(5),We=n.n(qe);function Ye(e){return(Ye="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Xe(e,t){return!t||"object"!==Ye(t)&&"function"!==typeof t?Be(e):t}function Be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ze(e,t){return(Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var et=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}(c,e);var t,n,o,i,a=(t=c,function(){var e,n=Je(t);if(Qe()){var o=Je(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return Xe(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).detectFullScreen=t.detectFullScreen.bind(Be(t)),t}return n=c,(o=[{key:"componentDidMount",value:function(){We.a.addEventListener("fullscreenchange",this.detectFullScreen)}},{key:"componentWillUnmount",value:function(){We.a.removeEventListener("fullscreenchange",this.detectFullScreen)}},{key:"componentDidUpdate",value:function(){this.handleProps(this.props)}},{key:"handleProps",value:function(e){var t=We.a.fullscreenElement===this.node;t&&!e.enabled?this.leaveFullScreen():!t&&e.enabled&&this.enterFullScreen()}},{key:"detectFullScreen",value:function(){this.props.onChange&&this.props.onChange(We.a.fullscreenElement===this.node)}},{key:"enterFullScreen",value:function(){We.a.fullscreenEnabled&&We.a.requestFullscreen(this.node)}},{key:"leaveFullScreen",value:function(){We.a.fullscreenEnabled&&We.a.exitFullscreen()}},{key:"render",value:function(){var e=this;return this.props.enabled&&["fullscreen"].push("fullscreen-enabled"),console.log("fullscreen",this.props.enabled),r.a.createElement("div",{ref:function(t){return e.node=t},style:this.props.enabled?{height:"100%",width:"100%"}:void 0},this.props.children)}}])&&Ge(n.prototype,o),i&&Ge(n,i),c}(o.Component);$e(et,"propTypes",{children:_.a.node.isRequired,enabled:_.a.bool.isRequired,onChange:_.a.func}),$e(et,"defaultProps",{enabled:!1});var tt=et,nt=n(13),ot=n.n(nt);function rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var it=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),rt(this,"initVideoNode",(function(){n.containerNode.width=0,n.containerNode.height=0,n.containerNode.loop=!0,n.containerNode.muted=!0,n.containerNode.crossOrigin="anonymous",n.containerNode.setAttribute("webkit-playsinline","webkit-playsinline")})),rt(this,"getTextureFromVideo",(function(e){var t=new c.VideoTexture(e);return t.minFilter=c.LinearFilter,t.format=c.RGBFormat,t})),rt(this,"loadFlvVideo",(function(e){if(n.initVideoNode(),ot.a.isSupported()){var t=ot.a.createPlayer({type:"flv",url:e});n.videoLoader=t,t.attachMediaElement(n.containerNode),t.load(),t.play()}else console.error("Your browser does not support flvjs"),n.onLoadErrorHandler("\u8bbe\u5907\u4e0d\u652f\u6301FLV");return n.getTextureFromVideo(n.containerNode)})),rt(this,"loadHlsVideo",(function(e){if(n.initVideoNode(),Z.a.isSupported()){var t=new Z.a;n.videoLoader=t,t.loadSource(e),t.attachMedia(n.containerNode),t.on(Z.a.Events.MANIFEST_PARSED,(function(){n.containerNode.play(),n.onLoadSuccessHandler()}))}else console.log("\u8bbe\u5907\u4e0d\u652f\u6301HLS"),n.onLoadErrorHandler("\u8bbe\u5907\u4e0d\u652f\u6301HLS");return n.getTextureFromVideo(n.containerNode)})),rt(this,"loadMp4Video",(function(e){return n.initVideoNode(),n.containerNode.src=e,n.containerNode.load(),n.containerNode.play(),n.getTextureFromVideo(n.containerNode)})),rt(this,"loadImage",(function(e){return(new c.TextureLoader).load(e)})),rt(this,"loadTexture",(function(e){var t=e.type,o=e.res_url;switch(t){case"hls":return n.loadHlsVideo(o);case"flv":return n.loadFlvVideo(o);case"mp4":return n.loadMp4Video(o);case"image":return n.loadImage(o);default:return null}})),rt(this,"unloadFlvVideo",(function(){n.videoLoader&&(n.videoLoader.unload(),n.videoLoader.detachMediaElement())})),rt(this,"unloadHlsVideo",(function(){n.videoLoader&&n.videoLoader.destory()})),this.containerNode=t,this.onLoadSuccessHandler=null,this.onLoadErrorHandler=null,this.videoLoader=null};n(64);function at(e){return(at="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function lt(e,t){return!t||"object"!==at(t)&&"function"!==typeof t?ut(e):t}function ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function st(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ft(e){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pt(e,t){return(pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ht=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pt(e,t)}(l,e);var t,n,o,i,a=(t=l,function(){var e,n=ft(t);if(st()){var o=ft(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return lt(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),dt(ut(t=a.call(this,e)),"state",{showingEffect:!1,effectData:null,isFullScreen:!1}),dt(ut(t),"initCamera",(function(){var e=t.props,n=e.camera_fov,o=e.camera_far,r=e.camera_near,i=e.camera_position,a=e.camera_target,l=new c.PerspectiveCamera(n,t.mount.clientWidth/t.mount.clientHeight,r,o),u=new c.WebGLRenderer({antialias:!0});t.renderer=u,l.position.set(i.x,i.y,i.z),l.target=new c.Vector3(a.x,a.y,a.z),t.camera=l})),dt(ut(t),"initScene",(function(){var e=t.props,n=e.scene_texture_resource,o=e.axes_helper_display,r=new c.SphereGeometry(500,60,40);r.scale(-1,1,1);var i=new it(t.sceneContainer).loadTexture(n),a=new c.MeshBasicMaterial({map:i}),l=new c.Mesh(r,a);if(t.scene=new c.Scene,t.scene.add(l),o){var u=new c.AxesHelper(1e3);t.scene.add(u)}})),dt(ut(t),"initEvent",(function(){window.addEventListener("resize",t.onWindowResize,!1)})),dt(ut(t),"initDisplay",(function(){var e=t.props,n=e.event_list,o=e.hot_spot_list;t.spriteData=new Map(n),t.spriteShapeHelper=new S(t.scene,t.camera),t.spriteShapeHelper.setPointList(o),t.spriteShapeHelper.objectClickHandler=function(e){var n=e[0].object.name;t.spriteData.has(n)&&t.setState({showingEffect:!0,effectData:t.spriteData.get(n)}),console.log(e[0].object.name)};var r=t.props.model_list;t.centerModelHelper=new Ve(t.scene),t.centerModelHelper.loadModelList(r)})),dt(ut(t),"initAction",(function(){t.viewConvertHelper=new ze(t.camera,t.innerViewControls),t.innerViewControls&&t.innerViewControls.disConnect(),t.viewConvertHelper.toNormalView(8e3,2e3)})),dt(ut(t),"onWindowResize",(function(){t.camera.aspect=window.innerWidth/window.innerHeight,t.camera.updateProjectionMatrix(),t.renderer.setSize(window.innerWidth,window.innerHeight)})),dt(ut(t),"initRenderer",(function(){var e=t.renderer;e.setPixelRatio(window.devicePixelRatio),e.setSize(window.innerWidth,window.innerHeight),e.sortObjects=!1,e.autoClear=!1,t.mount.appendChild(e.domElement)})),dt(ut(t),"animate",(function(){requestAnimationFrame(t.animate),t.innerView?t.innerViewControls&&t.innerViewControls.update():t.controls.update(),t.centerModelHelper&&t.centerModelHelper.update(),g.a.update(),t.renderer.render(t.scene,t.camera)})),dt(ut(t),"initControls",(function(){t.innerViewControls=new w(t.camera),t.innerViewControls.connect()})),t.mount=null,t.scene=null,t.camera=null,t.renderer=null,t.controls=null,t.sceneContainer=null,t.innerView=!0,t.innerViewControls=null,t.spriteShapeHelper=null,t.centerModelHelper=null,t.viewConvertHelper=null,t.spriteData=null,t}return n=l,(o=[{key:"componentDidMount",value:function(){this.initScene(),this.initCamera(),this.initEvent(),this.initControls(),this.animate(),this.initDisplay(),this.initRenderer(),this.initAction(),this.props.fetchLiveConfigure()}},{key:"componentWillUnmount",value:function(){this.mount.removeChild(this.renderer.domElement)}},{key:"render",value:function(){var e=this;return console.log("redux.data.live_configure",this.props.live_configure),r.a.createElement(tt,{enabled:this.state.isFullScreen,onChange:function(t){return e.setState({isFullScreen:t})}},r.a.createElement("div",{style:{width:"100vw",height:"100vh",background:"#888",overflow:"hidden"}},r.a.createElement("div",{id:"canvas",style:{width:"100%",height:"100%",background:"#888"},ref:function(t){e.mount=t}}),this.state.showingEffect?r.a.createElement(xe,{data:this.state.effectData,onCloseClickHandler:function(){e.setState({effectData:null})}}):"",r.a.createElement("video",{id:"video",style:{display:"none"},ref:function(t){e.sceneContainer=t}}),r.a.createElement("div",{id:"display",style:{display:"none"}})))}}])&&ct(n.prototype,o),i&&ct(n,i),l}(o.Component);ht.protoTypes={camera_fov:_.a.number,camera_near:_.a.number,camera_far:_.a.number,camera_position:_.a.object,camera_target:_.a.object,scene_texture_resource:_.a.object,axes_helper_display:_.a.bool,hot_spot_list:_.a.array,event_list:_.a.array},ht.defaultProps={camera_fov:150,camera_near:.01,camera_far:1e4,camera_position:{x:0,y:450,z:0},camera_target:{x:0,y:0,z:0},scene_texture_resource:{type:"hls",res_url:"http://cache.utovr.com/s1e3tzoku70yk8mpa3/L3_5dxsrk4kh56gc4l1_v2.m3u8"},axes_helper_display:!0,hot_spot_list:[["infocard",{phi:-90,theta:-10,res_url:"hotspot_video.png"}],["image",{phi:32,theta:14,res_url:"hotspot_video.png"}],["video",{phi:-153,theta:-44,res_url:"hotspot_video.png"}],["control",{phi:67,theta:19,res_url:"hotspot_video.png"}]],event_list:[["infocard",{id:"infocard",type:"infocard",iframeUrl:"https://gs.ctrip.com/html5/you/place/14.html"}],["image",{id:"image",type:"image",imageUrl:"https://pic-cloud-bupt.oss-cn-beijing.aliyuncs.com/5c882ee6443a5.jpg",jumpUrl:"http://www.youmuvideo.com"}],["video",{id:"video",type:"video",videoUrl:"https://video-cloud-bupt.oss-cn-beijing.aliyuncs.com/hangzhou.mp4"}],["control",{id:"control",type:"control"}]],model_list:[["12332",{objUrl:"SambaDancing.fbx",texture:"texture1.png",modeFormat:"fbx",scale:1}],["23433",{objUrl:"model.json",texture:"texture1.png",modeFormat:"obj",scale:1}]]};var yt=Object(l.b)((function(e){return e.basic}),{fetchLiveConfigure:function(e){return function(e){s.a.get("http://114.116.180.115:9000/channel/info/?lid=lc205").then((function(t){var n=t.data;200===n.code&&e(function(e){return{payload:e,type:"GET_LIVE_CONFIGURE"}}(n.data))}))}}})(ht),mt=n(6),bt=n(30),vt=Object(mt.c)({basic:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_LIVE_CONFIGURE":return p({},e,{live_configure:t.payload});default:return e}}}),wt=Object(mt.e)(vt,Object(mt.d)(Object(mt.a)(bt.a),window.devToolsExtension?window.devToolsExtension():function(e){return e}));function gt(e){return(gt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ot(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function jt(e,t){return!t||"object"!==gt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Et(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function St(e){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pt(e,t){return(Pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _t=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pt(e,t)}(c,e);var t,n,o,i,a=(t=c,function(){var e,n=St(t);if(Et()){var o=St(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return jt(this,e)});function c(){return Ct(this,c),a.apply(this,arguments)}return n=c,(o=[{key:"render",value:function(){return r.a.createElement(l.a,{store:wt},r.a.createElement(yt,null))}}])&&Ot(n.prototype,o),i&&Ot(n,i),c}(r.a.Component);function kt(e){return(kt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Rt(e,t){return!t||"object"!==kt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Lt(e){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tt(e,t){return(Tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}console.log("xrplayer",_t);var Ht=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tt(e,t)}(c,e);var t,n,o,i,a=(t=c,function(){var e,n=Lt(t);if(Mt()){var o=Lt(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return Rt(this,e)});function c(){return Dt(this,c),a.apply(this,arguments)}return n=c,(o=[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(_t,null))}}])&&xt(n.prototype,o),i&&xt(n,i),c}(r.a.Component);a.a.render(r.a.createElement(Ht,null),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.7a0cc359.chunk.js.map